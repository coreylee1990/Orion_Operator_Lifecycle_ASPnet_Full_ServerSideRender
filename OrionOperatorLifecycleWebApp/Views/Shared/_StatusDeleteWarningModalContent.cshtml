@using OrionOperatorLifecycleWebApp.Controllers
@model StatusDeleteWarningViewModel

<div style="background: white; padding: 1rem 1.5rem; border-radius: 4px; margin-bottom: 1rem; border-left: 3px solid #dc3545;">
    <h6 style="color: #dc3545; font-weight: 600; margin-bottom: 0.25rem; font-size: 1.05rem;">
        <i class="fas fa-exclamation-circle me-2"></i>@Model.OperatorCount Operator@(Model.OperatorCount != 1 ? "s" : "") in "@Model.StatusName" (@Model.DivisionId)
    </h6>
</div>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
    <div>
        <div class="table-responsive" style="max-height: 350px; overflow-y: auto; border: 1px solid #dee2e6; border-radius: 4px;">
            <table class="table table-hover table-sm mb-0" style="font-size: 0.9rem;">
                <thead style="position: sticky; top: 0; background-color: #f8f9fa; z-index: 10;">
                    <tr>
                        <th style="padding: 10px;">Operator ID</th>
                        <th style="padding: 10px;">First Name</th>
                        <th style="padding: 10px;">Last Name</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var op in Model.Operators)
                    {
                        <tr>
                            <td style="padding: 8px; font-family: monospace; font-size: 0.8rem;">@(op.Id ?? "N/A")</td>
                            <td style="padding: 8px;">@(op.FirstName ?? "N/A")</td>
                            <td style="padding: 8px;">@(op.LastName ?? "N/A")</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
    
    <div>
        <div style="background: white; padding: 1.25rem; border-radius: 4px; border: 1px solid #dee2e6; margin-bottom: 1rem;">
            <h6 style="color: #0d6efd; font-weight: 600; margin-bottom: 0.75rem; font-size: 1rem;">
                <i class="fas fa-people-arrows me-2"></i>Reassign Operators
            </h6>
            <p style="margin-bottom: 1rem; color: #6c757d; font-size: 0.9rem;">
                @if (Model.HasSuggestion)
                {
                    <text>We recommend moving operators to <strong>"@Model.SuggestedStatusName"</strong> (the previous step in your workflow).</text>
                }
                else
                {
                    <text>No alternate status available in this division.</text>
                }
            </p>
            <label for="targetStatusSelect" class="form-label" style="font-weight: 500; color: #212529; font-size: 0.9rem; margin-bottom: 0.5rem;">
                Target status:
            </label>
            <select class="form-select" id="targetStatusSelect" style="padding: 0.5rem; border: 1px solid #ced4da; font-size: 0.95rem;">
                @if (Model.StatusOptions.Any())
                {
                    @foreach (var option in Model.StatusOptions)
                    {
                        var orderLabel = !string.IsNullOrEmpty(option.OrderId) ? $" (Step {option.OrderId})" : "";
                        <option value="@option.StatusName" 
                                data-statusid="@option.StatusId" 
                                data-orderid="@option.OrderId" 
                                selected="@option.IsSelected">
                            @option.StatusName@orderLabel
                        </option>
                    }
                }
                else
                {
                    <option value="">No statuses available</option>
                }
            </select>
        </div>
        
        <div style="background: #e7f3ff; padding: 1rem; border-radius: 4px; border: 1px solid #b8daff; margin-bottom: 1rem;">
            <p style="margin-bottom: 0.5rem; color: #004085; font-weight: 500; font-size: 0.875rem;">
                <i class="fas fa-info-circle me-1"></i> Reassign & Delete will:
            </p>
            <ul style="margin-bottom: 0; padding-left: 1.25rem; color: #004085; font-size: 0.825rem; line-height: 1.6;">
                <li>Move @Model.OperatorCount operator@(Model.OperatorCount != 1 ? "s" : "") to selected status</li>
                <li>Mark "@Model.StatusName" as deleted</li>
                <li>Adjust workflow order</li>
            </ul>
        </div>
        
        <div style="background: #fff3cd; padding: 1rem; border-radius: 4px; border: 1px solid #ffc107;">
            <p style="margin-bottom: 0.5rem; color: #856404; font-weight: 500; font-size: 0.875rem;">
                <i class="fas fa-exclamation-triangle me-1"></i> Delete Without Reassigning:
            </p>
            <ul style="margin-bottom: 0; padding-left: 1.25rem; color: #856404; font-size: 0.825rem; line-height: 1.6;">
                <li>Operators remain linked to deleted status</li>
                <li>May cause data inconsistencies</li>
            </ul>
        </div>
    </div>
</div>
